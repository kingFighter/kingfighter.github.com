#+BEGIN_HTML
---
layout: post
title: "octopress-encoding-problem"
date: 2012-10-07 15:58
comments: true
categories: [octopress]
---
#+END_HTML
#+AUTHOR: Lv Kaiyang(Kevin Lui)
* 初始安装使用octopress总会碰到各种问题，比较常见的就是编码问题

*注意：我的安装环境为win7 64位*

** rake generate提示编码错误

以下是我碰到的已经解决的问题

#+begin_example
...
/convertible.rb:29:in `read_yaml': invalid byte sequence in GBK (ArgumentError)
....
#+end_example

原因：你生成的文件编码方式不是Ansi(比如是UTF－8)

解决：转换文件编码为Ansi即可，不过生成的网页在UTF-8下会显示乱码

#+begin_example
...
invalid byte sequence in UTF-8 (ArgumentError)
...
#+end_example

原因：你生成的文件编码方式为UTF-8，,但在Ruby *convertible.rb* 文件中没有进行相应的修改

解决：
#+begin_example
 def read_yaml(base, name)
      -self.content = File.read(File.join(base, name))
      +self.content = File.read(File.join(base, name), :encoding => "utf-8")
#+end_example

*** 下面是我尝试但无效的解决方法

#+end_example
解决： 在命令行下改变当前代码页编码为UTF-8：
#+begin_example
chcp.com 65001
#+end_example


解决：
#+begin_example
`打开 shell|cmd 之后，先执行

    set LC_ALL=en_US.UTF-8
    set LANG=en_US.UTF-8
然后再执行 rake 的命令。
或者，在 d:\RailsInstaller\Ruby1.9.2\setup_environment.bat 的最后面加上这两句。
#+end_example

解决：在octopress根目录下加
#+begin_example
export LC_ALL=zh_CN.UTF-8
export LANG=zh_CN.UTF-8
#+end_example

解决：与上一解决方法相似，只是加入的位置不同
#+begin_example
在git bash下
cd ~
emacs -nw .bash_profile
加入
export   LC_ALL=zh_CN.UTF-8
export   LANG=zh_CN.UTF-8
#+end_example



